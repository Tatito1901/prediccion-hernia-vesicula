@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Importar fuentes optimizadas                                                */
/* ═══════════════════════════════════════════════════════════════════════════ */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap');

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Variables CSS mejoradas                                                      */
/* ═══════════════════════════════════════════════════════════════════════════ */
@layer base {
  :root {
    /* ─────────────────────────────────────────────────────────────────────── */
    /* Colores base optimizados                                                */
    /* ─────────────────────────────────────────────────────────────────────── */
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    /* Paleta primaria médica profesional */
    --primary: 210 100% 47%;
    --primary-foreground: 210 40% 98%;
    
    --primary-50: 210 100% 97%;
    --primary-100: 210 100% 94%;
    --primary-200: 210 100% 87%;
    --primary-300: 210 100% 76%;
    --primary-400: 210 100% 63%;
    --primary-500: 210 100% 47%;
    --primary-600: 210 100% 41%;
    --primary-700: 210 100% 35%;
    --primary-800: 210 100% 29%;
    --primary-900: 210 100% 23%;
    --primary-950: 210 100% 15%;

    /* Colores secundarios */
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 210 100% 47%;
    --radius: 0.75rem;

    /* ─────────────────────────────────────────────────────────────────────── */
    /* Colores de estado médico                                                */
    /* ─────────────────────────────────────────────────────────────────────── */
    --success-light: 142 76% 94%;
    --success: 142 71% 45%;
    --success-dark: 142 71% 35%;

    --warning-light: 48 96% 92%;
    --warning: 48 96% 53%;
    --warning-dark: 48 96% 43%;

    --error-light: 0 93% 94%;
    --error: 0 84% 60%;
    --error-dark: 0 84% 50%;

    --info-light: 204 100% 94%;
    --info: 204 100% 50%;
    --info-dark: 204 100% 40%;

    /* Estados clínicos específicos */
    --clinical-pending: 48 96% 53%;
    --clinical-active: 210 100% 47%;
    --clinical-completed: 142 71% 45%;
    --clinical-cancelled: 0 84% 60%;
    --clinical-no-show: 215 16% 50%;

    /* ─────────────────────────────────────────────────────────────────────── */
    /* Colores de sidebar optimizados                                          */
    /* ─────────────────────────────────────────────────────────────────────── */
    --sidebar-background: 0 0% 99%;
    --sidebar-foreground: 222 47% 11%;
    --sidebar-primary: 210 100% 47%;
    --sidebar-primary-foreground: 210 40% 98%;
    --sidebar-accent: 210 40% 96%;
    --sidebar-accent-foreground: 222 47% 11%;
    --sidebar-border: 214 32% 91%;
    --sidebar-ring: 210 100% 47%;

    /* ─────────────────────────────────────────────────────────────────────── */
    /* Colores de gráficos profesionales                                       */
    /* ─────────────────────────────────────────────────────────────────────── */
    --chart-1: 210 100% 47%;
    --chart-2: 142 71% 45%;
    --chart-3: 48 96% 53%;
    --chart-4: 0 84% 60%;
    --chart-5: 271 81% 56%;
    --chart-6: 215 25% 27%;

    --chart-green: 142 71% 45%;
    --chart-yellow: 48 96% 53%;
    --chart-red: 0 84% 60%;
    --chart-blue: 210 100% 47%;
    --chart-purple: 271 81% 56%;
    --chart-gray: 215 16% 50%;
    
    --chart-grid: 214 32% 91%;
    --chart-tooltip-bg: 0 0% 100%;
    --chart-tooltip-text: 222 84% 5%;

    /* ─────────────────────────────────────────────────────────────────────── */
    /* Variables de glassmorphism                                               */
    /* ─────────────────────────────────────────────────────────────────────── */
    --glass-bg: rgba(255, 255, 255, 0.85);
    --glass-border: rgba(255, 255, 255, 0.2);
    --glass-blur: 20px;
  }

  .dark {
    /* ─────────────────────────────────────────────────────────────────────── */
    /* Tema oscuro optimizado                                                  */
    /* ─────────────────────────────────────────────────────────────────────── */
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 100% 60%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --primary-50: 210 100% 15%;
    --primary-100: 210 100% 23%;
    --primary-200: 210 100% 29%;
    --primary-300: 210 100% 35%;
    --primary-400: 210 100% 41%;
    --primary-500: 210 100% 60%;
    --primary-600: 210 100% 63%;
    --primary-700: 210 100% 76%;
    --primary-800: 210 100% 87%;
    --primary-900: 210 100% 94%;
    --primary-950: 210 100% 97%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 210 100% 60%;

    /* Estados médicos en modo oscuro */
    --success-light: 142 71% 25%;
    --success: 142 71% 55%;
    --success-dark: 142 71% 65%;

    --warning-light: 48 96% 35%;
    --warning: 48 96% 63%;
    --warning-dark: 48 96% 73%;

    --error-light: 0 84% 35%;
    --error: 0 84% 65%;
    --error-dark: 0 84% 75%;

    --info-light: 204 100% 35%;
    --info: 204 100% 60%;
    --info-dark: 204 100% 70%;

    /* Estados clínicos en modo oscuro */
    --clinical-pending: 48 96% 63%;
    --clinical-active: 210 100% 60%;
    --clinical-completed: 142 71% 55%;
    --clinical-cancelled: 0 84% 65%;
    --clinical-no-show: 215 16% 70%;

    /* Sidebar en modo oscuro */
    --sidebar-background: 222 47% 5%;
    --sidebar-foreground: 210 40% 95%;
    --sidebar-primary: 210 100% 60%;
    --sidebar-primary-foreground: 222 47% 11%;
    --sidebar-accent: 217 33% 18%;
    --sidebar-accent-foreground: 210 40% 95%;
    --sidebar-border: 217 33% 18%;
    --sidebar-ring: 210 100% 60%;

    /* Gráficos en modo oscuro */
    --chart-1: 210 100% 60%;
    --chart-2: 142 71% 55%;
    --chart-3: 48 96% 63%;
    --chart-4: 0 84% 65%;
    --chart-5: 271 81% 66%;
    --chart-6: 215 25% 67%;

    --chart-green: 142 71% 55%;
    --chart-yellow: 48 96% 63%;
    --chart-red: 0 84% 65%;
    --chart-blue: 210 100% 60%;
    --chart-purple: 271 81% 66%;
    --chart-gray: 215 16% 70%;
    
    --chart-grid: 217 33% 25%;
    --chart-tooltip-bg: 217 33% 17%;
    --chart-tooltip-text: 210 40% 98%;

    /* Glassmorphism en modo oscuro */
    --glass-bg: rgba(15, 23, 42, 0.85);
    --glass-border: rgba(255, 255, 255, 0.1);
  }
}

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Estilos base mejorados                                                       */
/* ═══════════════════════════════════════════════════════════════════════════ */
@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply scroll-smooth;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-background text-foreground font-sans;
    font-synthesis: none;
    text-rendering: optimizeLegibility;
  }

  /* Mejoras tipográficas */
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
  }

  h1 { @apply text-3xl lg:text-4xl; }
  h2 { @apply text-2xl lg:text-3xl; }
  h3 { @apply text-xl lg:text-2xl; }
  h4 { @apply text-lg lg:text-xl; }
  h5 { @apply text-base lg:text-lg; }
  h6 { @apply text-sm lg:text-base; }

  /* Enlaces mejorados */
  a {
    @apply transition-colors duration-200;
  }

  /* Estados de focus mejorados */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
  }

  /* Selección de texto */
  ::selection {
    @apply bg-primary/20 text-primary-foreground;
  }

  /* Placeholders */
  ::placeholder {
    @apply text-muted-foreground opacity-60;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Scrollbar personalizado mejorado                                             */
/* ═══════════════════════════════════════════════════════════════════════════ */
@layer utilities {
  /* Scrollbar para modo claro */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: hsl(214 32% 80%) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 4px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: hsl(214 32% 80%);
    border-radius: 4px;
    transition: all 0.2s ease;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: hsl(214 32% 70%);
  }

  .scrollbar-thin::-webkit-scrollbar-corner {
    background: transparent;
  }

  /* Scrollbar médico */
  .scrollbar-medical {
    scrollbar-width: thin;
    scrollbar-color: hsl(210 100% 60%) transparent;
  }

  .scrollbar-medical::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, hsl(210 100% 60%), hsl(210 100% 47%));
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .scrollbar-medical::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, hsl(210 100% 50%), hsl(210 100% 40%));
  }

  /* Scrollbar en modo oscuro */
  .dark .scrollbar-thin {
    scrollbar-color: hsl(217 33% 25%) transparent;
  }

  .dark .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: hsl(217 33% 25%);
  }

  .dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: hsl(217 33% 35%);
  }

  .dark .scrollbar-medical::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, hsl(210 100% 70%), hsl(210 100% 60%));
  }

  .dark .scrollbar-medical::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, hsl(210 100% 80%), hsl(210 100% 70%));
  }
}

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Utilidades adicionales                                                       */
/* ═══════════════════════════════════════════════════════════════════════════ */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Gradientes médicos */
  .bg-gradient-medical {
    background: linear-gradient(135deg, hsl(210 100% 47%) 0%, hsl(210 100% 35%) 100%);
  }

  .bg-gradient-medical-soft {
    background: linear-gradient(135deg, hsl(210 100% 97%) 0%, hsl(210 100% 94%) 100%);
  }

  .dark .bg-gradient-medical-soft {
    background: linear-gradient(135deg, hsl(210 100% 15%) 0%, hsl(210 100% 23%) 100%);
  }

  /* Efectos glassmorphism */
  .glass-effect {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
  }

  .glass-card {
    @apply glass-effect rounded-xl shadow-lg;
  }

  /* Estados hover especiales */
  .hover-lift {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .dark .hover-lift:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
  }

  /* Efectos de brillo */
  .shimmer {
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.4),
      transparent
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }

  .dark .shimmer {
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.1),
      transparent
    );
  }

  /* Utilidades de accesibilidad */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Estados de carga */
  .pulse-medical {
    animation: pulse-medical 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse-medical {
    0%, 100% {
      background-color: hsl(210 100% 47%);
    }
    50% {
      background-color: hsl(210 100% 35%);
    }
  }

  /* Efectos de entrada */
  .animate-in {
    animation-duration: 0.3s;
    animation-timing-function: ease-out;
    animation-fill-mode: both;
  }

  .fade-in {
    animation-name: fadeIn;
  }

  .slide-in-left {
    animation-name: slideInLeft;
  }

  .scale-in {
    animation-name: scaleIn;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slideInLeft {
    from { transform: translateX(-100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }
}

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Componentes médicos profesionales                                            */
/* ═══════════════════════════════════════════════════════════════════════════ */
@layer components {
  /* Tarjetas médicas */
  .medical-card {
    @apply bg-white dark:bg-slate-900/90 border border-slate-200 dark:border-slate-700/50 rounded-xl shadow-lg backdrop-blur-sm transition-all duration-300 hover:shadow-xl;
  }

  .medical-card-elevated {
    @apply medical-card shadow-medical hover:shadow-medical-lg;
  }

  /* Botones médicos */
  .btn-medical {
    @apply bg-primary hover:bg-primary/90 text-primary-foreground font-medium px-4 py-2 rounded-lg transition-all duration-200 focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 hover:scale-105;
  }

  .btn-medical-outline {
    @apply border border-primary text-primary hover:bg-primary hover:text-primary-foreground font-medium px-4 py-2 rounded-lg transition-all duration-200 focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;
  }

  .btn-medical-ghost {
    @apply text-primary hover:bg-primary/10 font-medium px-4 py-2 rounded-lg transition-all duration-200 focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;
  }

  /* Inputs médicos */
  .input-medical {
    @apply border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all duration-200 bg-white dark:bg-slate-900;
  }

  /* Badges de estado */
  .status-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-all duration-200;
  }

  .status-pending {
    @apply bg-warning/10 text-warning-dark border border-warning/20 dark:bg-warning/20 dark:text-warning-light;
  }

  .status-active {
    @apply bg-primary/10 text-primary-foreground border border-primary/20 dark:bg-primary/20;
  }

  .status-completed {
    @apply bg-success/10 text-success-dark border border-success/20 dark:bg-success/20 dark:text-success-light;
  }

  .status-cancelled {
    @apply bg-error/10 text-error-dark border border-error/20 dark:bg-error/20 dark:text-error-light;
  }

  .status-no-show {
    @apply bg-slate-100 text-slate-600 border border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700;
  }

  /* Headers médicos */
  .medical-header {
    @apply bg-gradient-to-r from-primary/5 to-primary/10 border-b border-primary/20 px-6 py-4 rounded-t-xl;
  }

  /* Navegación médica */
  .medical-nav-item {
    @apply flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 hover:bg-primary/10 hover:text-primary focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;
  }

  .medical-nav-item.active {
    @apply bg-primary text-primary-foreground hover:bg-primary/90;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════ */
/* React Datepicker - Estilos mejorados                                         */
/* ═══════════════════════════════════════════════════════════════════════════ */

/* Estilos base del datepicker */
.react-datepicker {
  @apply font-sans border-border bg-background text-foreground rounded-xl shadow-xl;
}

.react-datepicker__header {
  @apply bg-card border-b border-border rounded-t-xl;
}

.react-datepicker__current-month,
.react-datepicker-time__header,
.react-datepicker-year-header {
  @apply text-foreground font-semibold;
}

.react-datepicker__day-name,
.react-datepicker__day,
.react-datepicker__time-name {
  @apply text-foreground;
}

.react-datepicker__day:hover,
.react-datepicker__month-text:hover,
.react-datepicker__quarter-text:hover,
.react-datepicker__year-text:hover {
  @apply bg-accent text-accent-foreground rounded-md;
}

.react-datepicker__day--selected,
.react-datepicker__day--in-selecting-range,
.react-datepicker__day--in-range,
.react-datepicker__month-text--selected,
.react-datepicker__month-text--in-selecting-range,
.react-datepicker__month-text--in-range,
.react-datepicker__quarter-text--selected,
.react-datepicker__quarter-text--in-selecting-range,
.react-datepicker__quarter-text--in-range,
.react-datepicker__year-text--selected,
.react-datepicker__year-text--in-selecting-range,
.react-datepicker__year-text--in-range {
  @apply bg-primary text-primary-foreground rounded-md font-medium;
}

.react-datepicker__day--keyboard-selected,
.react-datepicker__month-text--keyboard-selected,
.react-datepicker__quarter-text--keyboard-selected,
.react-datepicker__year-text--keyboard-selected {
  @apply bg-primary text-primary-foreground rounded-md;
}

.react-datepicker__day--disabled,
.react-datepicker__month-text--disabled,
.react-datepicker__quarter-text--disabled,
.react-datepicker__year-text--disabled {
  @apply text-muted-foreground opacity-50;
}

.react-datepicker__navigation-icon::before {
  @apply border-foreground;
}

.react-datepicker__navigation:hover .react-datepicker__navigation-icon::before {
  @apply border-primary;
}

.react-datepicker__today-button {
  @apply bg-secondary text-secondary-foreground border-t border-border hover:bg-accent hover:text-accent-foreground transition-colors;
}

/* Time picker */
.react-datepicker__time-container {
  @apply border-l border-border;
}

.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box {
  @apply bg-background;
}

.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list li.react-datepicker__time-list-item {
  @apply text-foreground hover:bg-accent hover:text-accent-foreground transition-colors;
}

.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list li.react-datepicker__time-list-item--selected {
  @apply bg-primary text-primary-foreground font-semibold;
}

/* Dropdown selects */
.react-datepicker__header__dropdown--select,
.react-datepicker__year-dropdown-container--select select,
.react-datepicker__month-dropdown-container--select select,
.react-datepicker__month-year-dropdown-container--select select {
  @apply bg-input text-foreground border border-border rounded-md px-2 py-1;
}

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Responsive y accesibilidad                                                   */
/* ═══════════════════════════════════════════════════════════════════════════ */

/* Reducir animaciones para usuarios con preferencias de accesibilidad */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Mejoras para pantallas táctiles */
@media (hover: none) and (pointer: coarse) {
  .hover-lift:hover {
    transform: none;
  }
  
  .medical-nav-item:hover {
    @apply bg-transparent;
  }
}

/* Safe areas para dispositivos móviles */
@supports (padding: max(0px)) {
  .mobile-safe-area {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* Print styles */
@media print {
  .sidebar,
  .mobile-menu,
  .no-print {
    display: none !important;
  }
  
  .medical-card {
    @apply border border-slate-300 shadow-none;
  }
}