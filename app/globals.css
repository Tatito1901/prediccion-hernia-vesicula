@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Variables CSS - Tema Claro & Oscuro                                         */
/* ═══════════════════════════════════════════════════════════════════════════ */
@layer base {
  :root {
    /* Colores base */
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 158 60% 44%;

    /* Colores principales */
    --primary: 158 60% 44%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    /* Paleta médica */
    --medical: 210 100% 47%;
    --medical-foreground: 210 40% 98%;
    --medical-light: 210 100% 94%;
    --medical-dark: 210 100% 35%;

    /* Paleta de marca (Navy + Green) */
    --brand-navy: 222 61% 18%;
    --brand-navy-600: 222 61% 26%;
    --brand-navy-800: 222 61% 12%;
    --brand-green: 158 60% 44%;
    --brand-green-600: 158 60% 38%;

    /* Estados */
    --success: 142 71% 45%;
    --success-foreground: 142 85% 95%;

    --warning: 48 96% 53%;
    --warning-foreground: 48 96% 10%;

    --error: 0 84% 60%;
    --error-foreground: 0 85% 95%;

    --info: 204 100% 50%;
    --info-foreground: 204 100% 95%;

    /* Estados clínicos */
    --clinical-pending: 48 96% 53%;
    --clinical-pending-foreground: 48 96% 10%;

    --clinical-active: 210 100% 47%;
    --clinical-active-foreground: 210 40% 98%;

    --clinical-completed: 142 71% 45%;
    --clinical-completed-foreground: 142 85% 95%;

    --clinical-cancelled: 0 84% 60%;
    --clinical-cancelled-foreground: 0 85% 95%;

    --clinical-no-show: 215 16% 50%;
    --clinical-no-show-foreground: 215 16% 95%;

    /* Sidebar */
    --sidebar-background: 0 0% 99%;
    --sidebar-foreground: 222 47% 11%;
    --sidebar-primary: 210 100% 47%;
    --sidebar-primary-foreground: 210 40% 98%;
    --sidebar-accent: 210 40% 96%;
    --sidebar-accent-foreground: 222 47% 11%;
    --sidebar-border: 214 32% 91%;
    --sidebar-ring: 210 100% 47%;

    /* Gráficos */
    --chart-1: 210 100% 47%;
    --chart-2: 142 71% 45%;
    --chart-3: 48 96% 53%;
    --chart-4: 262 88% 65%;
    --chart-5: 340 82% 61%;

    /* Radius */
    --radius: 0.75rem;

    /* Hint del UA para seleccionar paleta correcta */
    color-scheme: light dark;
  }

  .dark {
    /* Base */
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 158 55% 48%;

    /* Principales */
    --primary: 158 55% 48%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    /* Médica */
    --medical: 210 100% 60%;
    --medical-foreground: 222.2 47.4% 11.2%;
    --medical-light: 210 100% 70%;
    --medical-dark: 210 100% 50%;

    /* Paleta de marca (Navy + Green) */
    --brand-navy: 222 61% 10%;
    --brand-navy-600: 222 61% 16%;
    --brand-navy-800: 222 61% 6%;
    --brand-green: 158 55% 48%;
    --brand-green-600: 158 55% 42%;

    /* Estados */
    --success: 142 71% 55%;
    --success-foreground: 142 71% 10%;

    --warning: 48 96% 63%;
    --warning-foreground: 48 96% 10%;

    --error: 0 84% 65%;
    --error-foreground: 0 84% 10%;

    --info: 204 100% 60%;
    --info-foreground: 204 100% 10%;

    /* Clínicos */
    --clinical-pending: 48 96% 63%;
    --clinical-pending-foreground: 48 96% 10%;

    --clinical-active: 210 100% 60%;
    --clinical-active-foreground: 222.2 47.4% 11.2%;

    --clinical-completed: 142 71% 55%;
    --clinical-completed-foreground: 142 71% 10%;

    --clinical-cancelled: 0 84% 65%;
    --clinical-cancelled-foreground: 0 84% 10%;

    --clinical-no-show: 215 16% 70%;
    --clinical-no-show-foreground: 215 16% 10%;

    /* Sidebar */
    --sidebar-background: 222 47% 5%;
    --sidebar-foreground: 210 40% 95%;
    --sidebar-primary: 210 100% 60%;
    --sidebar-primary-foreground: 222 47% 11%;
    --sidebar-accent: 217 33% 18%;
    --sidebar-accent-foreground: 210 40% 95%;
    --sidebar-border: 217 33% 18%;
    --sidebar-ring: 210 100% 60%;

    /* Gráficos */
    --chart-1: 210 100% 60%;
    --chart-2: 142 71% 55%;
    --chart-3: 48 96% 63%;
    --chart-4: 0 84% 65%;
    --chart-5: 271 81% 66%;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Estilos base                                                                */
/* ═══════════════════════════════════════════════════════════════════════════ */
@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply scroll-smooth;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-background text-foreground font-sans;
    font-synthesis: none;
    text-rendering: optimizeLegibility;
  }

  /* Tipografía */
  h1, h2, h3, h4, h5, h6 { @apply font-semibold tracking-tight; }
  h1 { @apply text-3xl lg:text-4xl; }
  h2 { @apply text-2xl lg:text-3xl; }
  h3 { @apply text-xl lg:text-2xl; }
  h4 { @apply text-lg lg:text-xl; }
  h5 { @apply text-base lg:text-lg; }
  h6 { @apply text-sm lg:text-base; }

  /* Enlaces */
  a { @apply transition-colors duration-200; }

  /* Focus */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
  }

  /* Selección de texto */
  ::selection { @apply bg-primary/20 text-primary-foreground; }

  /* Placeholder */
  ::placeholder { @apply text-muted-foreground opacity-60; }
}

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Utilidades                                                                  */
/* ═══════════════════════════════════════════════════════════════════════════ */
@layer utilities {
  /* Balance de texto */
  .text-balance { text-wrap: balance; }

  /* Gradientes médicos */
  .bg-gradient-medical {
    background: linear-gradient(135deg, hsl(var(--medical)) 0%, hsl(var(--medical-dark)) 100%);
  }
  .bg-gradient-medical-soft {
    background: linear-gradient(135deg, hsl(var(--medical-light)) 0%, hsl(var(--medical)) 100%);
  }

  /* Hover lift */
  .hover-lift { transition: transform 0.2s ease, box-shadow 0.2s ease; }
  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }
  .dark .hover-lift:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
  }

  /* Efecto shimmer (incluye keyframes abajo) */
  .shimmer {
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }
  .dark .shimmer {
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  }

  /* Accesibilidad */
  .sr-only {
    position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
    overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;
  }

  /* Patrón de grid sutil usado en la página de login */
  .bg-grid-pattern {
    background-image:
      linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
    background-size: 30px 30px;
  }

  /* Animación de flotación suave para el logo */
  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  /* Borde con gradiente animado para contenedores con clase .gradient-border-container */
  .gradient-border-container::before {
    content: '';
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    z-index: -1;
    margin: -1px;
    border-radius: inherit;
    background: conic-gradient(from 180deg at 50% 50%, #2dc876, #1ca9e0, #2dc876);
    animation: border-spin 3s linear infinite;
  }

  /* Animación genérica */
  .animate-in { animation-duration: 0.3s; animation-timing-function: ease-out; animation-fill-mode: both; }
}

/* Keyframes para shimmer (evita depender del tailwind.config) */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Animaciones específicas del login */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-8px); }
}

@keyframes border-spin {
  100% { transform: rotate(-360deg); }
}

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Scrollbar                                                                   */
/* ═══════════════════════════════════════════════════════════════════════════ */
.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: hsl(214 32% 80%) transparent;
}
.scrollbar-thin::-webkit-scrollbar { width: 8px; height: 8px; }
.scrollbar-thin::-webkit-scrollbar-track { background: transparent; border-radius: 4px; }
.scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: hsl(214 32% 80%);
  border-radius: 4px;
  transition: all 0.2s ease;
}
.scrollbar-thin::-webkit-scrollbar-thumb:hover { background-color: hsl(214 32% 70%); }
.scrollbar-thin::-webkit-scrollbar-corner { background: transparent; }

/* Scrollbar médico */
.scrollbar-medical { scrollbar-width: thin; scrollbar-color: hsl(var(--medical)) transparent; }
.scrollbar-medical::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, hsl(var(--medical-light)), hsl(var(--medical)));
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.scrollbar-medical::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, hsl(var(--medical)), hsl(var(--medical-dark)));
}

/* Scrollbar en modo oscuro */
.dark .scrollbar-thin { scrollbar-color: hsl(217 33% 25%) transparent; }
.dark .scrollbar-thin::-webkit-scrollbar-thumb { background-color: hsl(217 33% 25%); }
.dark .scrollbar-thin::-webkit-scrollbar-thumb:hover { background-color: hsl(217 33% 35%); }

/* ═══════════════════════════════════════════════════════════════════════════ */
/* React Datepicker                                                             */
/* ═══════════════════════════════════════════════════════════════════════════ */
.react-datepicker { @apply font-sans border-border bg-background text-foreground rounded-xl shadow-xl; }
.react-datepicker__header { @apply bg-card border-b border-border rounded-t-xl; }
.react-datepicker__current-month,
.react-datepicker-time__header,
.react-datepicker-year-header { @apply text-foreground font-semibold; }
.react-datepicker__day-name,
.react-datepicker__day,
.react-datepicker__time-name { @apply text-foreground; }

.react-datepicker__day:hover,
.react-datepicker__month-text:hover,
.react-datepicker__quarter-text:hover,
.react-datepicker__year-text:hover { @apply bg-accent text-accent-foreground rounded-md; }

.react-datepicker__day--selected,
.react-datepicker__day--in-selecting-range,
.react-datepicker__day--in-range,
.react-datepicker__month-text--selected,
.react-datepicker__month-text--in-selecting-range,
.react-datepicker__month-text--in-range,
.react-datepicker__quarter-text--selected,
.react-datepicker__quarter-text--in-selecting-range,
.react-datepicker__quarter-text--in-range,
.react-datepicker__year-text--selected,
.react-datepicker__year-text--in-selecting-range,
.react-datepicker__year-text--in-range { @apply bg-primary text-primary-foreground rounded-md font-medium; }

.react-datepicker__day--keyboard-selected,
.react-datepicker__month-text--keyboard-selected,
.react-datepicker__quarter-text--keyboard-selected,
.react-datepicker__year-text--keyboard-selected { @apply bg-primary text-primary-foreground rounded-md; }

.react-datepicker__day--disabled,
.react-datepicker__month-text--disabled,
.react-datepicker__quarter-text--disabled,
.react-datepicker__year-text--disabled { @apply text-muted-foreground opacity-50; }

.react-datepicker__navigation-icon::before { @apply border-foreground; }
.react-datepicker__navigation:hover .react-datepicker__navigation-icon::before { @apply border-primary; }

.react-datepicker__today-button { @apply bg-secondary text-secondary-foreground border-t border-border hover:bg-accent hover:text-accent-foreground transition-colors; }

/* Time picker */
.react-datepicker__time-container { @apply border-l border-border; }
.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box { @apply bg-background; }
.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list li.react-datepicker__time-list-item { @apply text-foreground hover:bg-accent hover:text-accent-foreground transition-colors; }
.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list li.react-datepicker__time-list-item--selected { @apply bg-primary text-primary-foreground font-semibold; }

/* Dropdown selects */
.react-datepicker__header__dropdown--select,
.react-datepicker__year-dropdown-container--select select,
.react-datepicker__month-dropdown-container--select select,
.react-datepicker__month-year-dropdown-container--select select { @apply bg-input text-foreground border border-border rounded-md px-2 py-1; }

/* ═══════════════════════════════════════════════════════════════════════════ */
/* Responsive y accesibilidad                                                  */
/* ═══════════════════════════════════════════════════════════════════════════ */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Táctiles: desactiva elevación */
@media (hover: none) and (pointer: coarse) {
  .hover-lift:hover { transform: none; }
}

/* Safe areas móviles */
@supports (padding: max(0px)) {
  .mobile-safe-area {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* Print */
@media print {
  .sidebar, .mobile-menu, .no-print { display: none !important; }
  .medical-card { @apply border border-slate-300 shadow-none; }
}
